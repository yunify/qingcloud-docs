---
title: "告警服务"
date: 2020-01-30T00:38:25+09:00
description: Test description
draft: false
enableToc: false
keyword: 青云
---

# 简介

告警功能提供对监控指标的告警服务支持，用户对云服务的核心监控指标设置告警规则，当监控指标触发用户设置的告警规则阈值时，则会按照用户设置的查收通知形式，收取告警信息。目前平台支持以邮箱、短信、等方式通知用户，让用户可以在第一时间得知云资源发生的异常情况，快速准确定位，并迅速处理故障，避免因资源问题或者外部操作原因，造成业务上的损失。

# 功能概述

监控告警功能是对资源层面的监控数据，设置告警条件和通知列表， 有助于及时了解资源使用情况和处理突发事件。具体包含以下几个核心的功能点：

1. 设置告警策略规则
2. 绑定资源到具体的告警规则内
3. 设置告警通知联系人
4. 设置联系人接收方式

# 目前支持的监控项包括：

**主机**
* CPU 使用百分比
* 内存使用百分比
* 磁盘空间使用百分比，检查范围包括主机中所有已挂载（mount）的分区
* 主机网卡的进流量，检查范围包括主机所有网卡
* 主机网卡的出流量，检查范围包括主机所有网卡

**公网IP**
* 公网进流量
* 公网出流量

**路由器**
注： 路由器新增针对网络 PPS 和路由器 CPU / 内存的监控告警仅支持新的区域和可用区
* 路由器所连网络的进流量，检查范围包括所有与此路由器连接的私有网络
* 路由器所连网络的出流量，检查范围包括所有与此路由器连接的私有网络
* 路由器所连网络的入口 PPS，检查范围包括所有与此路由器连接的私有网络
* 路由器所连网络的出口 PPS，检查范围包括所有与此路由器连接的私有网络
* 路由器自身的 CPU 利用率
* 路由器自身的内存利用率

**私有网络**
注： 私有网络监控告警仅支持新的区域和可用区
* 私有网络所有网卡的进流量，检查范围包括私有网络内的所有网卡
* 私有网络所有网卡的出流量，检查范围包括私有网络内的所有网卡
* 私有网络所有网卡的入口 PPS，检查范围包括私有网络内的所有网卡
* 私有网络所有网卡的出口 PPS，检查范围包括私有网络内的所有网卡

**负载均衡器**
1. 监听器 HTTP/HTTPS 协议
* 请求数：接收到的请求数
* 平均响应延迟时间：监听器下所有后端的响应时间
* 平均并发数：并发连接数
* 后端1xx/2xx/3xx/4xx/5xx响应数：监听器下所有后端返回的，对应状态码的响应数
* 后端服务器可用个数
* 后端服务器不可用个数
2. 监听器 TCP 协议
* 连接数：监听器下所有后端的 TCP 连接数
* 平均并发数：并发连接数
* 后端服务器可用个数
* 后端服务器不可用个数
3. 后端服务 HTTP 协议
* 平均响应延迟时间：监听器下所有后端的响应时间
* 服务状态：后端服务器是否异常
* 后端1xx/2xx/3xx/4xx/5xx响应数：此后端返回的，对应状态码的响应数
4. 后端服务 TCP 协议
* 连接数：此后端的 TCP 连接数
* 服务状态：后端服务器是否异常

**关系型数据库**
关系型数据库的监控告警只会监控 “主节点” ，包括如下监控项：
* CPU：CPU 使用百分比
* 内存：内存使用百分比
* 磁盘使用率：磁盘空间使用百分比
* 活跃连接数：数据库的活跃连接数
* 查询请求：数据库执行的所有查询请求的次数
* 慢查询：根据数据库配置的慢查询标准，监控慢查询的次数
* 全表扫描次数：发生全表扫描的次数。 (全表扫描是数据库服务器用来搜寻表的每一条记录的过程， 直到所有符合给定条件的记录返回为止，大多发生在对无索引的表进行查询)

**MongoDB**
* CPU：CPU 使用百分比
* 内存：内存使用百分比
* 磁盘使用率：磁盘空间使用百分比
* 连接数：数据库的连接数

**Redis/Memcached**
* 内存利用率：内存使用百分比
* 被拒绝 key 个数

**Zookeeper**
* CPU：CPU 使用百分比
* 内存：内存使用百分比
* 集群服务是否可用

**Kafka**
* CPU：CPU 使用百分比
* 内存：内存使用百分比
* 磁盘使用率：磁盘空间使用百分比
* 出现未复制分区或离线分区

**Hadoop/Spark/Storm/ElasticSearch/HBase**
* CPU：CPU 使用百分比
* 内存：内存使用百分比
* 磁盘使用率：磁盘空间使用百分比