---
title: "监听器概述"
description: 负载均衡监听器概述。
keyword: 负载均衡器,监听器,协议类型,端口配置
draft: false
weight: 1
---

创建负载均衡器后，需要为负载均衡器配置监听器。监听器负责监听负载均衡器上的请求，并根据负载均衡策略分发流量到后端服务器。

## 监听协议类型

监听器可以监听负载均衡实例上的四层和七层请求，您可根据从客户端到负载均衡器的应用场景选择监听协议。

四层和七层负载均衡的区别主要体现在：对用户请求进行负载均衡时，是依据四层协议还是七层协议来进行转发流量。

- 四层协议：传输层协议，主要通过 VIP + Port 接受请求并分配流量到后端服务器。例如：TCP、UDP、SSL 等协议。
- 七层协议：应用层协议，基于 URL、HTTP 头部等应用层信息进行流量分发。例如：HTTP、HTTPS 等协议。


| 协议分类 | 协议类型 | 协议说明                                                     | 适用场景                                                     |
| -------- | :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 四层协议 | TCP      | <ul><li>面向连接的、可靠的传输层协议。</li><li>基于源地址的会话保持。</li><li>数据传输快。</li></ul> | 适用于注重可靠性，对数据准确性要求高的场景，如文件传输、发送或接收邮件、远程登录。 |
| 四层协议 | UDP      | <ul><li>无连接的传输层协议。</li><li>可靠性相对低。</li><li>数据传输快。</li></ul> | 适用于关注实时性而相对不注重可靠性的场景，如视频聊天、游戏、金融实时行情推送。 |
| 四层协议 | SSL      | <ul><li>安全的 TCP，阻止未经授权的访问。</li><li>统一的证书管理服务，加解密操作在负载均衡器上完成。</li></ul> | 适用于 TCP 协议下对安全性要求非常高的场景，支持基于 TCP 的自定义协议。 |
| 七层协议 | HTTP     | <ul><li>应用层协议，主要解决如何包装数据。</li><li>简单的请求-响应协议，通常运行在 TCP 之上。</li><li>基于 Cookie 的会话保持。</li><li>使用X-Forward-For获取源地址。</li></ul> | 需要对数据内容进行识别的应用，如 Web 应用、移动游戏等。      |
| 七层协议 | HTTPS    | <ul><li>加密的应用层协议，可以阻止未经授权的访问。</li><li>基于 Cookie 的会话保持。</li><li>统一的证书管理服务，加解密操作在负载均衡器上完成。</li></ul> | 需要加密传输的 HTTP 应用 。                                  |

## 监听端口配置

| 端口类型 | 说明                                                         | 限制                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 前端端口 | 前端监听端口是负责接收负载均衡器请求及向后端服务器转发请求的端口。 | 取值范围：1-65535<br/>在同一个负载均衡实例：<ul><li>同一类协议下监听端口不可重复（TCP/TCP SSL/HTTP/HTTPS 同属于 TCP 类）。例如，不可以同时创建监听器 TCP:80 和监听器 HTTP:80。</li><li>UDP 协议可以和其他协议的前端端口可以重复。例如，可以同时创建监听器 TCP:80 和监听器 UDP:80。</li></ul> |
| 后端端口 | 后端服务端口是云服务器提供服务的端口，接收并处理来自负载均衡的流量。 | 取值范围：1-65535<br/>在同一个负载均衡实例内：<ul><li>同一个监听端口可以将流量转发到多个云服务器的多个端口上。</li><li>不同监听协议的服务端口可以重复。例如，监听器 HTTP:80 和监听器 HTTPS:443 可以同时绑定同一台云服务器的同一个端口。</li><li>同一种监听协议下，同一个后端服务端口只能被一个监听器绑定，即四元组（VIP、监听协议、后端服务内网 IP、后端服务端口）需要唯一。</li></ul> |