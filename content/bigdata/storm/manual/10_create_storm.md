---
title: "创建 Storm"
description: 本小节主要介绍如何快速创建 Storm。 
keywords: 创建 Storm
weight: 10
collapsible: false
draft: false
---

创建 Storm 集群前，您需要先创建一个 VPC 网络，并在 QingCloud AppCenter 中创建一个 Zookeeper 集群,其他地方创建的 Zookeeper 集群识别不出来， 建议 Storm 与 Zookeeper 在一个私有网络中。

>**注意：**
>
>为了保障数据安全，Storm 集群需要运行在受管私有网络中。所以在创建一个 Storm 集群之前，至少需要一个路由器（或 VPC 网络）和一个受管私有网络，受管私有网络需要和路由器（或 VPC 网络）连接，并开启 DHCP 服务（默认开启）。

## 步骤一：选择基本配置

1. 登录 QingCloud 管理控制台。

2. 选择**产品与服务** > **大数据服务** > **Storm 服务**，进入 **Storm** 页面。

3. 点击**创建**，进入应用部署页面。

4. 根据需要设置 Storm 的名称、描述信息，选择 **Storm 版本**、**计费方式**和**可用区**。

   > **说明：**
   >
   > 若首次创建，在 Storm 页面，点击**立即部署**，创建 Storm。

   <img src="../../_images/create_storm_1.png" style="zoom:50%;" />

## 步骤二：配置主节点

选择主节点的数量，并选择主节点配置、容量，以定义 master 集群的规模和性能。

1. 选择 **CPU**、**内存**和**主机类型**。
2. 设置**存储容量**，每个实例的磁盘大小。可设置范围为 10 GB -2000 GB。
3. 选择节点的个数。

<img src="../../_images/create_storm_2.png" style="zoom:50%;" />

> **注意：**
>
> 主节点上运行了 Nimbus、DRPC、UI 等服务，建议在生产环境中使用至少 2 个主节点，以实现主节点集群的 HA。
>
> 主机配置１核2G 仅供测试使用，生产环境建议至少使用 2 核 4G。节点数量和主机配置，在创建之后可以在线伸缩。

## 步骤三：配置从节点

设置从节点的数量，并选择从节点配置、容量，以定义 slave 集群的规模和性能。

1. 选择 **CPU**、**内存**和**主机类型**。
2. 设置**存储容量**，每个实例的磁盘大小。可设置范围为 10 GB -2000 GB。
3. 设置节点的个数。

<img src="../../_images/create_storm_3.png" style="zoom:50%;" />

>**注意：**
>
>从节点上启用了 Supervisor 服务并运行 Worker 进程，请在生产环境使用至少 2 个从节点，以实现从节点集群的 HA。从节点作为工作节点，通常需要更高的配置。

## 步骤四：配置 RPC 节点

设置 RPC 节点的数量，并选择 RPC 节点配置、容量，以定义 RPC 集群的规模和性能。

1. 选择 **CPU**、**内存**和**主机类型**。
2. 设置**存储容量**，每个实例的磁盘大小。可设置范围为 10 GB -2000 GB。
3. 设置节点的个数。

<img src="../../_images/create_storm_4.png" style="zoom:50%;" />

> **注意：**
>
> 主节点已经启用了 DRPC 服务，因此低负载时 DRPC 节点不是必须的；如果您需要高负载 RPC 服务，可以添加额外的 RPC 节点。

## 步骤五：配置 Storm 客户端节点

1. 选择 **CPU**、**内存**和**主机类型**。
2. 设置**存储容量**，每个实例的磁盘大小。可设置范围为 10 GB -2000 GB。
3. 选择节点的个数。

<img src="../../_images/create_storm_5.png" style="zoom:50%;" />

## 步骤六：配置网络

1. 选择 **VPC 网络**。

   > **说明：**
   >
   > 若您没有已创建的 VPC 网络，可点击新建 VPC 网络，创建 VPC 网络。
   >
   > 创建 VPC 网络时，不能使用免费型 VPC 网络，免费型网络仅具有内网功能，不支持绑定公网 IP 和转发公网流量。

2. 选择**私有网络**。

3. 设置节点 IP，您可以选择**自动分配**或者**手动指定**节点 IP。

4. 设置预留 IP，您可以选择**自动分配**或者**手动指定**节点 IP。

<img src="../../_images/create_storm_6.png" style="zoom:50%;" />

## 步骤七：配置 Zookeeper 

选择 Storm 集群所依赖的 Zookeeper 服务，集群将创建于 ZooKeeper 所在的私有网络中。

<img src="../../_images/create_storm_7.png" style="zoom:50%;" />

## 步骤八：配置服务环境参数

请根据您的实际环境配置环境参数。

<img src="../../_images/create_storm_8.png" style="zoom:50%;" />

## 步骤九：勾选用户协议

阅读并勾选**请阅读《云平台 AppCenter 用户协议》并确认该协议**，以部署应用。

## 创建成功

点击**提交**，安成 Storm 的创建。

当 Storm 创建完成之后，您可以查看每个节点的运行状态。如下图所示，当**节点状态**显示为**活跃**，表示该节点启动正常。

当每个节点都启动正常后 Storm 集群显示为**活跃**状态，服务状态会由**获取中**变为**活跃**状态，表示您已经可以正常使用 Storm 服务了。

![](../../_images/create_storm_9.png)
