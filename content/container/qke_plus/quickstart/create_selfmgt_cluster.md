---
title: "创建 QKE 自管版集群"
description: 介绍如何创建 QKE 集群
draft: false
weight: 11
keyword: 青云, QingCloud, 云计算, QKE集群, Kubernetes, 自管
---

本小节介绍如何快速创建 QKE 自管版集群。

## 前提条件

- 已注册青云QingCloud 账号，并完成[实名认证](/authorization/account/manual/account_aut/account_intro/)。
- 集群创建过程中将使用云服务器、硬盘、负载均衡器等多种资源，若资源配额不足，将无法成功创建集群。创建集群所需要的资源请参考[集群计费项](/container/qke_plus/billing/bill_des/)。若需提高配额，请[提交工单](https://console.qingcloud.com/tickets/)申请。

## 操作步骤

1. 登录 QingCloud 管理控制台。

2. 在控制台顶部的导航菜单中，选择**产品与服务** > **容器服务** > **容器引擎 QKE**，进入**快速入门**页面。

3. 在**快速入门**页面，点击**创建集群**，进入**创建集群**页面。

   也可在左侧导航栏，点击**集群管理**，在**集群管理**页面点击**创建集群**，进入**创建集群**页面。

4. 点击**自管版**页签，进入自管版集群创建页面。

   ![](../../_images/create_selfmgt_cluster.png)

5. 配置集群信息。

   **购买信息：**

   | 参数         | 说明                                                         |
   | ------------ | ------------------------------------------------------------ |
   | 计费模式     | <ul><li>**包年包月**：预付费模式，按照购买时长（月或年）一次性支付所选时长的费用，享有更大的优惠，适合中长期稳定需求。</li><li>**按需计费**：后付费模式，按秒计费，按小时扣费，适合短期弹性需求。</li></ul> |
   | 部署方式     | <ul><li>**单可用区部署**：表示节点部署在同一可用区，网络延时最低。</li><li>**多可用区部署**：表示节点分散部署在同一区域下的不同可用区，可用性更高。</li></ul> |
   | 区域及可用区 | 选择单可用区部署时，需要选择区域及可用区；选择多可用区部署时，需要选择一个区域。<br/>选择部署区域及可用区，建议选择靠近您业务所在地的区域，以减少网络时延，提高访问速度。 |

   

   **配置信息：**

   | <span style="display:inline-block;width:70px">参数</span> | 说明                                                         |
   | --------------------------------------------------------- | ------------------------------------------------------------ |
   | 集群版本                                                  | QKE 集群版本。                                               |
   | 节点规格                                                  | <ul><li>**快速配置**：</br>预置`基础型试用环境`和`企业型生产环境`两种配置类型，请根据实际需求进行选择。<br/>基础型试用环境：提供面向个人及中小团队用户的入门级实例资源，适用于开发测试环境。<br/>企业型生产环境：提供面向企业级用户的高性能高可靠计算实例资源，适用于正式生产应用环境。</li><li>**自定义**：<br/>根据需要自定义主节点数量、规格及硬盘大小，以及工作节点的节点类型、数量、规格及硬盘大小。<div style="background-color: #D8ECDE;padding: 10px 24px; margin: 10px 0;border-left:3px solid #00a971;"><b>说明</b><br/><ul><li>节点规格：基础型规格支持基础型 s1 机型；企业型规格支持企业型 e3 机型。节点规格详细说明，请参考[云服务器介绍](/compute/vm/intro/instance/)。</li>  <li>主节点规格默认为企业型，工作节点规格可选基础型和企业型。</li><li>主节点应至少有1个，工作节点应至少有2个。若您需要安装 KubeSphere，则工作节点至少为3个。</li><li>集群创建后，主节点不可删除，不可新增。</li>  </div></li></ul> |

   

   **网络配置：**

   | <span style="display:inline-block;width:70px">参数</span> | 说明                                                         |
   | --------------------------------------------------------- | ------------------------------------------------------------ |
   | 网络                                                      | 选择集群部署的 VPC 网络及私有网络。<br/>若未创建 VPC 网络或已有的 VPC 网络不满足您的要求，可点击**创建 VPC 网络**进行创建，具体操作请参见[创建 VPC 网络](/network/vpc/manual/vpcnet/10_create_vpc/) 。<div style="background-color: #D8ECDE;padding: 10px 24px; margin: 10px 0;border-left:3px solid #00a971;"><b>说明</b><br/>不支持使用**免费型** VPC 网络部署集群。  </div> |

   **依赖服务：**

   | <span style="display:inline-block;width:70px">参数</span> | 说明                                                         |
   | --------------------------------------------------------- | ------------------------------------------------------------ |
   | etcd 服务                                                 | QKE 集群使用 etcd 存储集群数据。<br/>为获得更好的性能，推荐选择单独部署的 Etcd 集群，否则将使用集群内自带的 etcd 服务。点击**创建 etcd 服务**即可[创建 etcd 集群](/middware/etcd/quickstart/qs10_deploy_etcd/)。etcd 集群和 QKE 集群需部署在同一 VPC 下。 |
   | ELK 服务                                                  | 添加依赖的 ELK 集群用于存储 QKE 集群日志数据。<br/>为了便于扩容，推荐选择单独部署的 ELK 集群，否则将使用集群内自带 [Elasticsearch ](https://github.com/elastic/elasticsearch) 服务。点击**创建 ELK服务**即可[创建 ELK 集群](/bigdata/elk/quickstart/create_cluster/)。ELK 集群和 QKE 集群需部署在同一 VPC 下。 |

   

   **对接服务：**

   | 参数                   | 说明                                                         |
   | ---------------------- | :----------------------------------------------------------- |
   | 集群可视化管理工具     | 选择是否安装扩展的集群可视化管理工具。<br/><ul><li>若选择**安装**，则需要继续选择待安装的工具。安装后，可通过 Web 界面更方便的管控集群及容器应用等。（目前仅支持安装 KubeSphere，后续将支持更多工具）</li><li>若选择**不安装**，则表示使用当前 QKE 控制台对集群资源及 Pod 进行简单管理。</li></ul> |
   | 选装组件               | 选择安装可视化管理工具时，可以选择安装您在业务中需要使用的组件。KubeSphere 各组件的功能说明可参考 [KubeSphere 官方文档](https://kubesphere.com.cn/docs/pluggable-components/)。<br/><div style="background-color: #D8ECDE;padding: 10px 24px; margin: 10px 0;border-left:3px solid #00a971;"><b>说明</b><br/>使用 KubeSphere 内置组件将产生额外费用。选择安装 KubeSphere 内置组件，将在集群创建成功后挂载一定数量的云硬盘，云硬盘在使用过程中按小时扣费。您可以到费用中心查看云硬盘消费情况。  </div> |
   | KubeSphere  控制台 EIP | 选择安装 KubeSphere 时，如果您希望通过公网 **LoadBalancer** 方式访问 KubeSphere 控制台，可选择一个可用的 EIP，系统将自动创建一个负载均衡器并绑定此 EIP 。 |

   **环境参数设置：**

   根据实际情况及需要，配置参数。若未配置，将使用系统默认配置。

   各项参数详细说明请参见[参数说明](../../manual/mgt_cluster/paras_cfg/#参数说明)。

   **集群设置：**

   | 参数     | 说明                                                         |
   | -------- | :----------------------------------------------------------- |
   | 集群名称 | 填写集群名称。不超过 16 个字符。                             |
   | 集群描述 | 填写集群描述信息。不超过 128 个字符。                        |
   | 自动续约 | 选择**包年包月**计费模式时，可勾选设置自动续费，并设置续费时长。 |

6. 选择购买时长（仅当集群为包年包月计费时需要设置）。

7. 点击**确认配置**，弹出**我的配置**窗口，查看资源配置及价格。

8. 确认无误后，点击**创建集群**，返回集群列表页面。

   创建过程中，**集群状态**显示为`创建中`。创建集群一般在 6-12 分钟左右（视集群配置而定）。

9. 可选：在**集群状态**列，点就**查看进度**，可查看集群创建的详细进度。

   <img src="/container/qke_plus/_images/creation_progress.png" style="zoom:80%;" />

   当**集群状态**显示为`活跃`，**服务状态**显示为`健康`时，表示集群已成功创建并正常运行。您可以正常使用 QKE 服务了。

   > **说明**
   >
   > **服务状态**为`不健康`，表示所有 Worker 节点服务状态异常；服务状态为`部分异常`表示部分 Worker 节点服务状态异常。

## 后续操作

- [配置镜像仓库](../cfg_mirror_repo/)

- [创建工作负载](../create_app/)

