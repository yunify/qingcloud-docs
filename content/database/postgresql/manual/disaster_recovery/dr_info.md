---
title: "灾备概述"
description: 本小节主要介绍 PostgreSQL 灾备概述。 
keyword: 灾备,使用限制,使用说明,PostgreSQL,关系型数据库,数据库
weight: 05
collapsible: false
draft: false
---

PostgreSQL 集群支持将另一区域 PostgreSQL 集群设置为**源集群**，提供集群灾备服务。

- 启动灾备功能后，**灾备集群**将类似于**源集群**的一个独立备用集群，完全同步**源集群**数据，确保数据的完整性。

- 启动灾备功能后，支持查看**灾备集群**同步进度和灾备参数。
  
- 当**源集群**所在区域发生突发生自然灾害等状况，**灾备集群**可快速提升为业务集群，及时恢复业务。

## 使用注意

### 启动灾备前

- **灾备集群**与**源集群**的 PostgreSQL 内核版本需一致。
- **灾备集群**与**源集群**的应用版本需升级到 `PG11-高可用版-V1.0.8`、`PG9.6-高可用版-V1.1.6`、`PG10-高可用版-V1.1.6`，或以上版本。
- **灾备集群**与**源集群**的网络需通畅，可通过[边界路由器](/network/border_router/)或 [VPN](/network/vpc/manual/vpn/) 等方式打通网络。
- **灾备集群**如下配置参数值需不小于**源集群**参数值。详细修改参数说明，请参见[修改配置参数](../../config_para/modify_para)。

     `max_connections`、`max_worker_processes`、`max_wal_senders`、`max_prepared_transactions`、`max_locks_per_transaction`

### 启动灾备后

- **灾备集群**与**源集群**的网络环境不支持随意切换，否则可能导致数据丢失。
- **灾备集群**仅支持读取数据，不支持写入数据。
- 未停止灾备前，禁止直接删除**灾备集群**。因直接删除**灾备集群**，相当于删除了**源集群**的一个备用节点，可能造成**源集群**业务阻塞，**源集群**上报节点故障。
- 未停止灾备前，**灾备集群**禁用高可用功能，即集群主节点发生故障后不能自动进行主备切换。
- 若需扩容**源集群**规格，请优先扩容**灾备集群**，再扩容**源集群**。

   > **说明**
   > 
   > 因 **max_connections** 参数默认值为 `auto-optimized-conns`，将随内存规格变化而调整。若 **灾备集群**的该参数值小于**源集群**，**灾备集群**将报“参数值过小”错误，可能影响数据的正常同步。

<!--- 未停止灾备前，**灾备集群**禁用重启功能，重启集群将提示**执行失败**。-->
