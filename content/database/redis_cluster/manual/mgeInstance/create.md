---
title: "创建集群" 
description: 本小节介绍如何创建 Redis 集群。 
weight: 1
draft: false
keywords: QingCloud，Redis Cluster，redis 集群，创建 redis 集群
---

本小节主要介绍如何创建 Redis 集群。

## 前提条件

已注册 QingCloud 青云账号并完成实名认证。

## 操作步骤

1. 登录 [QingCloud 管理控制台](https://console.qingcloud.com/login)。

2. 在控制台顶部的导航菜单中，选择**产品与服务** > **数据库与缓存** > **键值数据库 Redis**。

   ▪︎ 如果是首次部署，进入 Redis Cluster 应用简介页面，点击**立即部署**进入部署页面。

   ▪︎ 如果已创建过 Redis 集群，则进入 Redis Cluster 集群管理页面，点击**创建**进入部署页面。

### 第1步：基本设置

1. 在顶部**区域**下拉框中，选择部署区域。

   > **说明**
   >
   > 建议尽量选择靠近您客户的区域，以减少网络延时。

2. 填写集群基本信息，包括：名称、描述，选择版本、计费方式、部署方式和可用区。

   <img src="../../../_images/step1.png" alt="基本信息设置" style="zoom:50%;" />

   ​	▪︎ 版本：不同的 Redis 版本所支持的特性不同，可参考 [Redis 版本说明](../../../intro/redisversion/)，了解不同版本的 Redis。

   ​	▪︎ 计费方式：计费说明，请参考[费用说明](../../../billing/price/)。

   ​	▪︎ 部署方式：如果业务需要同城多活，建议选择**多可用区部署**；如果主机之间需要较低的网络时延，则建议选择**单可用区部署**。

   > **说明**
   >
   > ▪︎ 目前仅 Redis 5.0 以上版本的北京3区支持多可用区部署。
   >
   > ▪︎ 当集群Redis集群进行多可用区部署时，如果其中一个可用区故障，另一个可用区的节点不受影响。备节点会自动升级为主节点，对外提供服务，从而提供更高的容灾能力。
   >
   > ▪︎ 由于集群跨可用区部署时网络访问效率略低于部署在同一可用区内，因此 Redis 集群跨可用区部署时，主备节点之间同步效率会略有降低。

   ​	▪︎ 可用区：单可用区部署时，需要指定具体部署在哪个可用区。

### 第2步：主节点设置/分片设置

不同 Redis 版本，节点配置参数略有不同：

- Redis 4.0.6 版本需要选择节点的内存、主机类型、硬盘大小以及主从节点数量。
- Redis 5.0.8 版本需要选择节点的 CPU、内存、主机类型、硬盘大小以及主从节点数量。
- Redis 6.x 版本需要选择分片资源配置、内存、分片及分片副本数量。

关于如何配置节点的内存、类型、分片数量等，请参见XXX并结合您实际的业务需求进行选择。

以下分别为 Redis 6.2.5 版本及 Redis 5.0.8 版本的配置界面，其他版本请以实际界面为准。

**Redis 6.2.5**：

<img src="../../../_images/step2.png" alt="主节点配置" style="zoom:50%;" />

**Redis 5.0.8**：

<img src="../../../_images/step2_5.0.8.png" alt="主节点配置" style="zoom:50%;" />

### 第3步：网络设置

<img src="../../../_images/step3_1.png" alt="网络设置" style="zoom:50%;" />

1. 选择 Redis 集群部署的 VPC 网络及私有网络。

   不同的 Redis 集群可以重复使用相同的 VPC 网络和私有网络，也可以使用不同的 VPC 网络和私有网络。若您已经创建有 VPC 网络和私有网络，可重复使用，不需要多次创建。

   若您没有可用的 VPC 网络及私有网络，请根据界面提示，点击**新建 VPC 网络**进行创建。VPC 创建的具体操作请参见[创建 VPC 网络](/network/vpc/manual/vpcnet/10_create_vpc/)。

   > **说明**
   >
   > ▪︎ 选择的 VPC 网络与 Redis 集群应在相同的区域。
   >
   > ▪︎ 请勿选择免费型的 VPC，目前暂不支持在免费型 VPC 中创建集群。
   >
   > ▪︎ 私有网络的部署方式应与集群的部署方式保持一致，即都为**多可用区部署**或者都为**单可用区部署**。

3. 设置节点 IP。

   ▪︎ 自动分配：根据私有网络的地址范围自动分配节点 IP 地址。

   ▪︎ 手动指定：手动设置每一个节点的 IP 地址。

### 第4步：服务环境参数设置

![服务环境参数设置](../../../_images/step4.png)

- 控制台管理 ACL：选择是否由控制台管理 ACL 服务。

- 禁用 FLUSH 命令：为兼容 Redis 5.0.3 - QingCloud 1.2.1 之前的版本，自 Redis 5.0.3 - QingCloud 1.2.1 起添加了此项，默认为**否**，表示不禁用。

  > **注意**
  >
  > 此参数在集群创建后不可修改。
  >
  > 由于该命令的误操作会导致对数据造成不可恢复的丢失，因此我们强烈建议您在生产环境下禁用该命令。

- 其他参数：点击**更多服务环境参数**，页面展示所有可配置的服务环境参数。详细参数说明请参见[参数支持](../../../intro/para_list/)，请根据页面提示和实际需求设置。

> **说明**
>
> 提交配置之前可点击页面底部的**校验表单参数**来检测输入的参数是否有效。

### 第5步：用户协议确认

阅读《云平台 AppCenter 用户协议》并勾选确认接受该协议，点击**提交**，若开始创建 Redis 集群。

> **注意**
>
> 若选择按月或按年计费，将弹出扣费提示，请仔细阅读提示信息，再点击**我已了解，继续创建**。

待所有节点的**服务状态**显示为**正常**时， 表示节点已正常启动， Redis 集群创建完成。
