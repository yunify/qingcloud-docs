---
title: "启动异地灾备"
description: 本小节主要介绍如何创建异地灾备。 
keyword: 数据库,MySQL PLus,关系型数据库,MySQL,异地容灾，异地灾备
weight: 10
collapsible: false
draft: false
---



MySQL Plus 通过创建**灾备集群**，支持同步**源集群**数据、用户帐号和权限等至**灾备集群**。当**源集群**所在区域发生突发性状况，集群节点均无法连接时，可将业务切换至**灾备集群**，快速恢复业务访问。

**灾备集群**支持同步的信息如下：

- 全部业务数据
- 全部业务帐号和权限

本小节主要介绍如何在**灾备集群**启动灾备。

## 约束限制

- 若**源集群**非 MySQL Plus 集群，需确保其 MySQL 内核版本为 `5.6` 或 `5.7`，且开启了 GTID 模式。
- 当**源集群**与**灾备集群**不在同一 VPC 时，需使用[边界路由器](../../../../../network/border_router/)或 [VPN](../../../../../network/vpc/manual/vpn/) 等方式打通与**源集群**的网络。
- 启动灾备执行成功前，为避免数据丢失，**源集群**需暂停执行 DDL 语句。
- 启动灾备执行成功后，**灾备集群**的主节点高可用功能会暂时失效，即主节点发生故障后不能自动进行主备切换。
- 启动灾备执行成功后，**灾备集群**的暂时禁用重启功能，重启集群将提示**执行失败**。
- 启动灾备执行成功后，**灾备集群**的暂时禁止修改配置参数，修改参数后会延迟生效。

## 前提条件

- 已获取管理控制台登录账号和密码，且已获取集群操作权限。
- 已创建 MySQL Plus **灾备集群**，且集群状态为**活跃**。
- 已获取**源集群**相关灾备信息。
- **源集群**与**灾备集群**均修改如下配置参数为目标值：`connect_timeout=30`、`max_allowed_packets=1G` 、 `slave_pending_jobs_size_max=1G` 、`interactive_timeout=3600` 、 `wait_timeout=3600` 、`net_read_timeout=1800`、`net_write_timeout=1800`

## 操作步骤

1. 登录管理控制台。
2. 选择**产品与服务** > **数据库与缓存** > **关系型数据库 MySQL Plus**，进入集群管理页面。
3. 点击目标集群 ID，进入集群详情页面。
4. 在**基本属性**模块，点击集群操作下拉菜单。
5. 展开下拉菜单，点击**启动灾备**。

   <img src="../../../_images/enable_dr.png" alt="启动灾备" style="zoom:50%;" />

6. 配置**源集群**信息，详细请参见[参数说明](#参数说明)。
7. 确认配置信息无误后，点击**提交**，返回节点列表页面。

   待启动灾备执行完成后，在**灾备关系**页签可查看**源集群**信息时，当前集群即切换为**灾备集群**。

### 参数说明

|  <span style="display:inline-block;width:120px">参数</span> | <span style="display:inline-block;width:480px">说明</span>  |
|:--- |:--- |
| 角色  | 选择**灾备集群**节点角色类型，默认为`主实例`。 |
| 同步方式 |  选择数据同步方式。<li>若选择`全量+增量`方式，表示**灾备集群**将全量复制**源集群**数据，并作为备库从**源集群**同步增量数据。<li>若选择`增量`方式，需确保**灾备集群**已同步**源集群**的全量数据，例如**灾备集群**是基于**源集群**的最新备份创建的集群。 |
| 源集群区域 |  输入**源集群**所在区域。 |
| 源集群地址  |输入**源集群**的高可用 IP 地址。|
| 源集群 ID |  输入**源集群**的 ID。 |
| 源集群账号  |输入**源集群**具备 `super 权限`和`复制权限`的数据库帐号，例如 MySQL Plus 集群的`高级权限`帐号。|
| 源集群密码 |  输入**源集群**的数据库帐号密码。 |
| 源集群端口  |输入**源集群**的数据库端口号。|
