---
title: "回迁业务至源集群"
description: 本小节主要介绍如何回迁业务至源集群。 
keyword: 数据库,MySQL PLus,关系型数据库,MySQL,回迁业务至源集群
weight: 25
collapsible: false
draft: false
---

异地灾备功能支持将 MySQL Plus 集群作为另一个可用区的 MySQL Plus 集群的**灾备集群**。若**源集群**恢复后，需将业务回迁，可将**源集群**作为**灾备集群**的灾备。再通过设置原**灾备集群**永久可读，提升**源集群**灾备，将业务回迁至**源集群**。

> **注意**
> 
> -提升灾备后，**灾备集群**将不再从**源集群**同步数据和用户帐号等信息。
> 
> -提升灾备后，**灾备集群**集群高可用主从切换、重启和配置参数功能自动生效或恢复。

本小节主要介绍启动灾备后如何切换业务至灾备集群。

## 约束限制

- 将数据从**灾备集群**回迁到**源集群**，**源集群**需升级到 `1.5.6` 及以上版本。

## 前提条件

- 已获取管理控制台登录账号和密码，且已获取集群操作权限。
- 已**源集群**和**灾备集群**集群状态均为**活跃**。
- **源集群**与**灾备集群**均修改如下配置参数为目标值：`connect_timeout=30` 、`max_allowed_packets=1G` 、`slave_pending_jobs_size_max=1G` 、 `interactive_timeout=3600` 、 `wait_timeout=3600` 、 `net_read_timeout=1800`、`net_write_timeout=1800`

## 操作步骤

1. 登录管理控制台。

2. 选择**产品与服务** > **数据库与缓存** > **关系型数据库 MySQL Plus**，进入集群管理页面。

3. 在**源集群**[开启灾备](../disaster_recovery)。

4. 在原**灾备集群**，设置[开关只读](../../node_lifecycle/read_only_node)，设置只读为**开启**。

5. 在**源集群**，提升灾备。

   1. 点击**源集群** ID，进入集群详情页面。
   2. 在**基本属性**区域，展开操作操作栏，点击**提升灾备**，弹出集群提升确认窗口。

      <img src="../../../_images/switch_dr.png" alt="提升灾备" style="zoom:50%;" />

   3. 确认信息无误后，点击**提交**。

6. 在**源集群**，设置[开关只读](../../node_lifecycle/read_only_node)，设置只读为**关闭**。

7. 回迁业务至**源集群**。

   将业务连接数据库的地址修改为**源集群**的高可用 IP，则业务切换到**源集群**完成。
