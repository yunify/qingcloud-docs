---
title: "启动录制任务"
draft: false
collapsible: false
weight: 10
---

该接口用于启动录制任务，录制结束生将生成的mp4文件上传到指定的对象存储桶中。

> **注意：**
>
> - 请确保打开了录制功能。
>
> - 请确保正确配置了对象存储的存储位置，否则可能导致录制失败。
>
> - 至少有1个用户加入到频道。

## 请求路径

/v1/cloudRecord

## 请求方法

POST

## 公共参数

请参考[请求 query 公共参数](../10_api_overview/#请求-query-公共参数) 。

## 请求参数

| 参数              | 类型   | 是否必填 | 说明                                                         | 默认值 |
| ----------------- | ------ | -------- | ------------------------------------------------------------ | ------ |
| app_id            | String | 是       | 应用 ID                                                      | -      |
| project_id        | String | 是       | 项目 ID                                                      | -      |
| channel           | String | 是       | 频道名称                                                     | -      |
| sign_key          | String | 是       | 项目密钥                                                     | -      |
| isAudioOnly       | int    | 否       | 是否仅录制音频。<br />0：（默认）音视频同时录制。<br />1：仅启用音频录制功能，关闭视频录制。<br />isAudioOnly 和 isVideoOnly 不能同时设置为 1。 | 0      |
| isVideoOnly       | int    | 否       | 是否仅录制视频。<br />0：（默认）音视频同时录制。 <br />1：仅启用视频录制功能，关闭音频录制。<br />isAudioOnly 和 isVideoOnly 不能同时设置为 1。 | 0      |
| mixed_video_audio | int    | 否       | 同时录制音视频时的文件混合模式。<br />0：（默认）不混合音频和视频。<br />1：音频和视频混合成一个文件，录制文件格式为 MP4，但播放器支持有限。<br />2：音频和视频混合成一个文件，录制文件格式为 MP4，支持更多播放器。 | 2      |
| layout_mode       | int    | 否       | <li>0：（默认）悬浮布局。第一个加入频道的用户在屏幕上会显示为大视窗，铺满整个画布，其他用户的视频画面会显示为小视窗，从下到上水平排列，最多 4 行，每行 4 个画面，最多支持共 17 个录制画面。</li><li>1：自适应布局。根据用户的数量自动调整每个画面的大小，每个用户的画面大小一致，最多支持 17 个录制画面。</li><li>2：垂直布局。指定一个用户在屏幕左侧显示大视窗画面，其他用户的小视窗画面在右侧垂直排列，最多两列，一列 8 个画面，最多支持共 17 个录制画面。</li> | 0      |
| stream_type       | int    | 否       | 设置录制的视频流类型，只有在待录制频道开启了双流模式时该设置才会生效。 <br />0：（默认）录制视频大流。<br />1：录制视频小流。 |        |
| is_mixing_enabled | int    | 否       | <li>0：（默认）启用单流模式录制。一个 UID 对应一个音频文件和一个视频文件。录制文件的音频属性为：采样率固定为 48 kHz，声道数和码率与原始音频流保持一致。录制文件的视频属性与原始视频流保持一致。</li><li>1：启用合流模式录制。多个 UID 的音频混合成一个纯音频文件，多个 UID 的视频混合成一个纯视频文件。无论频道内有多少用户，都只生成 1 个混合音频文件和 1 个混合视频文件。混合文件的音频属性通过 audioProfile 参数进行设置，视频属性通过 mixResolution参数进行设置。</li> |        |

## 返回值

```
{
    "code": "success",
    "task_id": 40
}
```

返回数据说明，如下表所示。

| 参数    | 类型   | 是否必填 | 说明          |
| ------- | ------ | -------- | ------------- |
| code    | String | 是       | 响应代码      |
| task_id | int    | 是       | 录制任务 ID。 |

