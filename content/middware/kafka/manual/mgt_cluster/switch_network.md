---
title: "切换私有网络"
description: 切进换私有网络，即对 Kafka 集群中的节点行网络迁移。
keyword: 云计算,大数据,消息队列,中间件,Kafka,切换网络,切换私有网络,迁移网络
weight: 30
draft: false
---

切换私有网络，即对 Kafka 集群中的节点行网络迁移。

由于 Kafka 集群与依赖的 ZooKeeper 集群需要在同一个 VPC 中：

- [同 VPC 下切换私有网络](#同-vpc-下切换私有网络)：仅切换 Kafka 私有网络后即可立即访问 Kafka 服务，无需切换 ZooKeeper 私有网络。
- [跨 VPC 切换私有网络](#跨-vpc-切换私有网络)：当 Kafka 集群跨 VPC 切换私有网络后，依赖的 Zookeeper 集群的网络需要同步切换，否则 Kafka 集群节点的服务状态将会`不正常`，无法提供服务。

本小节主要介绍如何切换 Kafka 集群私有网络。

## 前提条件

- 已获取管理控制台登录账号和密码，且已获取 Kafka 集群操作权限。
- Kafka 集群状态为**活跃**。
- 已创建至少两个私有网络。

## 同 VPC 下切换私有网络

1. 登录管理控制台。
2. 选择**产品与服务** > **消息队列与中间件** > **Kafka 服务**，进入 Kafka 集群列表页面。
3. 点击目标集群 ID，进入集群详情页面。
4. 在**基本属性**模块，点击集群操作下拉菜单。
5. 展开下拉菜单，点击**切换私有网络**，弹出私有网络配置窗口。

    <img src="../../../_images/switch_network.png" alt="切换私有网络" style="zoom:50%;" />  

6. 在弹出的对话框中配置网络信息。

   - **角色** ：选择需切换网络环境的节点角色。仅可选择节点列表已有角色。
   - **VPC 网络** ：默认为集群当前 VPC 网络。
   - **私有网络** ：在下拉框选择所选 VPC 网络下已创建私有网络。
   - **节点 IP** ：默认为`自动分配`；选择`手动配置`需为各节点配置 IP。

7. 点击**提交**，返回集群详情页面，即可查看修改后的私有网络信息。

## 跨 VPC 切换私有网络

1. 参照[同 VPC 下切换私有网络](#同-vpc-下切换私有网络)切换 Kafka 集群私有网络到目标 VPC 的 vxnet。
2. 切换依赖的 ZooKeeper 集群私有网络到与 Kafka 集群同一 VPC 的 vxnet。详细操作请参见[切换 ZooKeeper 私有网络](/bigdata/zookeeper/manual/mgt_vxnet/)。

