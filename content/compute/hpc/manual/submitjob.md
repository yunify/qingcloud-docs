---
title: "提交作业"
linkTitle: "提交作业"
date: 2021-11-1T10:08:56+09:00
description: hpc 提交作业
keyword: 云计算, 青云, QingCloud, HPC，提交作业
draft: false
weight: 2
---

本指南旨在针对EHPC集群的提交作业，提供两种提交作业的方式

1. 界面提交：集群详情页面通过可视化界面提交作业
2. CLI/SSH提交：通过远程ssh登录，使用命令行提交作业，此方法需要准备公网IP

## 1. 界面提交

集群详情页面，选择”作业列表“，点击”提交作业“

<img src="../_images/image-20211124184021607.png" alt="image-20211124184021607" style="zoom:50%;" />

系统将打开提交作业页面，设置作业需要的核心数

<img src="../_images/image-20211124184134339.png" alt="image-20211124184134339" style="zoom:35%;" />

选择需要的软件

<img src="../_images/image-20211124184235264.png" alt="image-20211124184235264" style="zoom:35%;" />

选择作业命令文件，可以上传，也可以在线编辑

<img src="../_images/image-20211124184458951.png" alt="image-20211124184458951" style="zoom:35%;" />

选择完成后，点击”提交作业“，系统将通过调度器自动将作业分配到计算节点进行运行

<img src="../_images/image-20211124184614685.png" alt="image-20211124184614685" style="zoom:38%;" />

作业成功运行完成后，会显示 "运行结束”，运行失败作业状态会显示 “失败”，用户可以点击查看详情

![image-20211124184739227](../_images/image-20211124184739227.png)

系统将会为作业自动创建输出目录，包含标准日志输出文件.out，和错误日志输入文件.err，可以在作业详情页面点击在线查看

<img src="../_images/image-20211124184952031.png" alt="image-20211124184952031" style="zoom:40%;" />

如发现作业报错无法处理，可以随时联系们，或者提交工单，我们会派人技术支持人员联系您进行调试



## 2. CLI/SSH提交

青云EHPC集群包含登录节点、管控节点和计算节点，其中登录节点可以绑定公网IP进行外部访问，用户可以通过SSH的方式连接到集群的登录节点，以及使用sftp等相关文件管理的客户端

> **注意**：
>
> 如没有公网IP，需要到公网IP产品页，创建公网IP，将获取到一个公网访问的IP地址

如没有公网IP，跟随下面步骤创建

创建公网IP，跳转至“公网IP”产品页，点击“申请”按钮

<img src="../_images/image-20211124190209514.png" alt="image-20211124190209514" style="zoom:50%;" />

输入公网IP名称和带宽上限，一般默认即可，点击“提交“按钮，系统将为您分配公网IP地址

<img src="../_images/image-20211124190328368.png" alt="image-20211124190328368" style="zoom:40%;" />

如以获取公网IP，打开集群详情“节点列表”，找到登录节点，右侧更多按钮，点击“绑定公网IP”

<img src="../_images/image-20211124190020004.png" alt="image-20211124190020004" style="zoom:40%;" />



选择刚创建的公网IP，然后对此公网IP进行安全放行，进入”安全组“产品，选择”集群安全组“，查看详情

<img src="../_images/image-20211124191822801.png" alt="image-20211124191822801" style="zoom:40%;" />

点击”添加规则“，输入名称，选择右侧”ssh“，系统将默认填写下行规则+22端口，点击”提交“按钮，然后”应用修改“即可

<img src="../_images/image-20211124192003513.png" alt="image-20211124192003513" style="zoom:40%;" />

这时集群登录节点的访问 IP 已经配置完成，可以在集群详情节点列表查看登录公网IP，打开终端命令行应用，输入远程ssh命令

ssh admin@112.00.00.001

集群admin 默认密码是 Zhu@88jie

连接成功后将进入系统的用户目录，可以使用slurm常用作业命令进行提交作业了，如srun命令



